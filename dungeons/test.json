{
    "name" : "The Test Dungeon",
    "intro_text" : "Welcome to the TEST dungeon!",
    "start_room" : "entrance",
    "player" : {
        "name" : "Joseph",
        "inventory" : ["banana"]
    },
    "rooms" : {
        "entrance" : {
            "description" : "You're not in the cool room.",
            "objects" : {
                "lamp" : {
                    "current_state" : "default",
                    "states" : {
                        "default" : {
                            "description" : "There is a <i>lamp</i>, sitting there... menacingly..",
                            "fail_pickup" : "You attempt to grab the lamp, but it wobbles so much you reluctantly put it back down."
                        }
                    }
                }
            },
            "items" : ["blue key"],
            "exits" : {
                "north" : {
                    "destination" : "mainhall",
                    "current_state" : "default",
                    "states" : {
                        "default" : {
                            "description" : "There's a door to the <i>north</i>.",
                            "examination" : "The door appears to be open.",
                            "open" : "true"
                        }
                    }
                },
                "east" : {
                    "destination" : "closet",
                    "current_state" : "default",
                    "states" : {
                        "default" : {
                            "description" : "There's a door to the <i>east</i>.",
                            "examination" : "The door appears to be open.",
                            "open" : "true",
                            "on_enter": {
                                "description" : "You enter a small broom closet. It is cold."
                            }
                        }
                    }
                }
            }
        },
        "mainhall" : {
            "description" : "You're in a large hall.",
            "objects" : {
                "bookshelf" : {
                    "current_state" : "default",
                    "states" : {
                        "default" : {
                            "description" : "There's a large <i>bookshelf</i> in the corner of the room."
                        }
                    }
                }
            },
            "exits" : {
                "south" : {
                    "destination" : "entrance",
                    "current_state" : "default",
                    "states" : {
                        "default" : {
                            "description" : "There's a door to the <i>south</i>.",
                            "examination" : "The door appears to be open.",
                            "open" : "true"
                        }
                    }
                },
                "down" : {
                    "destination" : "hole",
                    "current_state" : "default",
                    "states" : {
                        "default" : {
                            "description" : "There's a rope you can climb <i>down</i>.",
                            "examination" : "The rope looks pretty old.",
                            "open" : "true",
                            "on_enter": {
                                "description" : "You start climbing down the rope, only to find it can't bear your weight. It snaps and you fall down, way down.",
                                "triggers" : [
                                    {
                                        "trigger_type" : "lose_game",
                                        "trigger_blocking" : "true"
                                    }
                                ]
                            }
                        }
                    }
                }
            }
        },
        "closet" : {
            "description" : "You are in a small broom closet.",
            "exits" : {
                "west" : {
                    "destination" : "entrance",
                    "current_state" : "default",
                    "states" : {
                        "default" : {
                            "description" : "There's a door to the <i>west</i>.",
                            "examination" : "The door appears to be open.",
                            "open" : "true"
                        }
                    }
                }
            }
        },
        "hole" : {
            "description" : "You find yourself in a dark hole. There is no escape."
        }
    },
    "items" : {
        "blue key": {
            "current_state" : "default",
            "states" : {
                "default" : {
                    "description" : "On the floor there is a <i>blue key</i>.",
                    "examination" : "It looks like a standard key, painted blue.",
                    "visible" : "true",
                    "on_use" : {
                        
                    },
                    "on_pickup" : {
                        
                    }
                }
            }
        },
        "banana": {
            "current_state" : "default",
            "states" : {
                "default" : {
                    "description" : "Bright and yellow, a herbvaceous fruit. It's actually technically a berry.",
                    "visible" : "true",
                    "on_use" : {
                        "triggers" : [
                            {
                                "trigger_type" : "state_change",
                                "target_type" : "items",
                                "target" : "banana",
                                "requires" : "blue key",
                                "requires_state":"default",
                                "new_state" : "eaten",
                                "description" : "You unlock the banana."
                            },
                            {
                                "trigger_type" : "state_change",
                                "target_type" : "items",
                                "target" : "banana",
                                "new_state" : "eaten",
                                "description" : "You eat the banana."
                            }
                            
                        ]
                    },
                    "on_pickup" : {
                        
                    }
                },
                "eaten" : {
                    "description" : "All that's left is the peel.",
                    "visible" : "true"
                }
            }
        }
    }
}
